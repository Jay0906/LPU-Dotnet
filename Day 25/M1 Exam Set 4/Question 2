using System;
using System.Collections.Generic;
using System.Linq;

class ExamManager
{
    private Dictionary<string, Dictionary<string, int>> records =
        new Dictionary<string, Dictionary<string, int>>();

    private List<string> insertionOrder = new List<string>();

    public void AddRecord(string studentId, string subject, int marks)
    {
        if (!records.ContainsKey(studentId))
        {
            records[studentId] = new Dictionary<string, int>();
            insertionOrder.Add(studentId);
        }

        if (records[studentId].ContainsKey(subject))
        {
            if (marks > records[studentId][subject])
                records[studentId][subject] = marks;
        }
        else
        {
            records[studentId][subject] = marks;
        }
    }

    public void RemoveRecord(string studentId, string subject)
    {
        if (records.ContainsKey(studentId) &&
            records[studentId].ContainsKey(subject))
        {
            records[studentId].Remove(subject);

            if (records[studentId].Count == 0)
            {
                records.Remove(studentId);
                insertionOrder.Remove(studentId);
            }
        }
    }

    public void GetTopScorer(string subject)
    {
        if (records.Count == 0)
        {
            Console.WriteLine("No Students");
            return;
        }

        int max = -1;
        List<string> topStudents = new List<string>();

        foreach (var student in insertionOrder)
        {
            if (records.ContainsKey(student) &&
                records[student].ContainsKey(subject))
            {
                int marks = records[student][subject];

                if (marks > max)
                {
                    max = marks;
                    topStudents.Clear();
                    topStudents.Add(student);
                }
                else if (marks == max)
                {
                    topStudents.Add(student);
                }
            }
        }

        if (max == -1)
        {
            Console.WriteLine("No Records");
        }
        else
        {
            foreach (var student in topStudents)
                Console.WriteLine(student + " " + max);
        }
    }

    public void GetResult()
    {
        if (records.Count == 0)
        {
            Console.WriteLine("No Students");
            return;
        }

        var sorted = records.Keys.OrderBy(x => x);

        foreach (var student in sorted)
        {
            double avg = records[student].Values.Average();
            Console.WriteLine(student + " " + avg.ToString("F2"));
        }
    }

    // ðŸ”¥ Required Method
    public int processCommands(string[] arr, int N)
    {
        for (int i = 0; i < N; i++)
        {
            string[] parts = arr[i].Split(' ');
            string command = parts[0];

            if (command == "ADD")
            {
                AddRecord(parts[1], parts[2], int.Parse(parts[3]));
            }
            else if (command == "REMOVE")
            {
                RemoveRecord(parts[1], parts[2]);
            }
            else if (command == "TOP")
            {
                GetTopScorer(parts[1]);
            }
            else if (command == "RESULT")
            {
                GetResult();
            }
        }

        return 0;   // as per method signature requirement
    }
}

class Program
{
    static void Main()
    {
        int N = int.Parse(Console.ReadLine());
        string[] inputs = new string[N];

        for (int i = 0; i < N; i++)
        {
            inputs[i] = Console.ReadLine();
        }

        ExamManager manager = new ExamManager();
        manager.processCommands(inputs, N);
    }
}
